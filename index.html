<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>å¿«æ¨‚èŠ’æœï½œé™ªä¼´å­©å­å­¸ç¿’è¬ç”¨ç‰ˆ</title>

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="å¿«æ¨‚èŠ’æœ" />
  <meta name="theme-color" content="#f59e0b" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
    :root{
      --indigo:#312e81;

      --bg:#fffbeb;
      --card:#ffffff;

      --accent:#f59e0b;
      --accent2:#fbbf24;

      --fire:#ef4444;      /* æ¶ˆé˜²è»Šï¼šç´…åº•ç™½å­— */
      --treaty:#f59e0b;    /* å’Œå¹³æ¢ç´„ï¼šæ©˜åº•ç™½å­— */
      --primary:#312e81;   /* ä¸»æŒ‰éˆ•ï¼šè—åº•ç™½å­— */
      --softBorder: rgba(251,191,36,.18);
    }

    body{
      font-family:'Noto Sans TC',sans-serif;
      background:var(--bg);
      -webkit-tap-highlight-color:transparent;
      color:var(--indigo);
    }

    .mango-gradient{ background:linear-gradient(135deg,var(--accent2) 0%,var(--accent) 100%); }
    .glass-card{ background:rgba(255,255,255,.92); backdrop-filter:blur(10px); border:1px solid var(--softBorder); }

    .tab-active{ color:var(--accent); border-bottom:3px solid var(--accent); }
    .page-content{ display:none; }
    .page-content.active{ display:block; }

    .fade-in{ animation:fadeIn .35s ease-out forwards; }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }

    ::-webkit-scrollbar{ width:4px; }
    ::-webkit-scrollbar-thumb{ background:#fde68a; border-radius:10px; }

    .view-chip{
      border:1px solid rgba(255,255,255,.45);
      background:rgba(255,255,255,.18);
      color:#fff;
    }
    .view-chip.active{
      background:#fff;
      color:var(--accent);
      border:1px solid #fff;
    }
    .child-view{ display:block; }
    .adult-view{ display:none; }
    body[data-view="adult"] .child-view{ display:none; }
    body[data-view="adult"] .adult-view{ display:block; }

    /* ========= ç«‹é«”æŒ‰éˆ• ========= */
    .btn-3d{
      position:relative;
      border:none;
      transform: translateY(0);
      box-shadow:
        0 10px 22px rgba(0,0,0,.10),
        0 2px 0 rgba(0,0,0,.10);
      overflow:hidden;
    }
    .btn-3d::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(to bottom, rgba(255,255,255,.35), rgba(255,255,255,0));
      opacity:.85;
      pointer-events:none;
    }
    .btn-3d:active{
      transform: translateY(2px);
      box-shadow:
        0 6px 16px rgba(0,0,0,.10),
        0 1px 0 rgba(0,0,0,.12);
    }

    .btn-fire{ background:var(--fire); color:#fff; }
    .btn-treaty{ background:var(--treaty); color:#fff; }
    .btn-primary{ background:var(--primary); color:#fff; }
    .btn-soft{
      background:#fff;
      border:1px solid rgba(49,46,129,.12);
      color:var(--indigo);
      box-shadow: 0 10px 22px rgba(0,0,0,.06);
    }
    .btn-soft:active{ transform: translateY(2px); box-shadow: 0 6px 14px rgba(0,0,0,.06); }

    /* ========= æ–·å­—è™•ç† ========= */
    .nowrap-title{
      white-space: nowrap;
      word-break: keep-all;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .title-fit{
      font-size: clamp(18px, 4.7vw, 22px);
      line-height: 1.15;
      letter-spacing: -0.02em;
    }
    .sos-border{ border-left-color: var(--fire); }

    @media (prefers-reduced-motion: reduce){
      .fade-in{ animation:none !important; }
      *{ scroll-behavior:auto !important; }
    }
  </style>
</head>

<body class="pb-24" data-view="child">

  <!-- Header -->
  <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md px-4 py-3 flex items-center justify-between shadow-sm">
    <div class="flex items-center space-x-2">
      <div class="w-10 h-10 mango-gradient rounded-xl flex items-center justify-center text-white text-xl shadow-lg" aria-hidden="true">
        <i class="fas fa-hand-holding-heart"></i>
      </div>
      <div>
        <h1 class="text-lg font-black tracking-tight text-indigo-900">å¿«æ¨‚èŠ’æœ</h1>
        <p class="text-[10px] text-orange-500 font-black tracking-tight">é™ªå­©å­å¿«æ¨‚å­¸ç¿’</p>
      </div>
    </div>

    <!-- æƒ…ç·’æ¶ˆé˜²è»Šï¼šç´…åº•ç™½å­— + ç«‹é«” -->
    <button data-page="sos" class="btn-3d btn-fire px-4 py-2 rounded-full flex items-center space-x-1 transition-all" aria-label="å•Ÿå‹•æƒ…ç·’æ¶ˆé˜²è»Š">
      <i class="fas fa-truck-medical text-xs" aria-hidden="true"></i>
      <span class="text-[11px] font-black">æƒ…ç·’æ¶ˆé˜²è»Š</span>
    </button>
  </header>

  <main class="max-w-md mx-auto p-5">

    <!-- HOME -->
    <div id="page-home" class="page-content active space-y-7">

      <!-- èªªæ˜æ¡† -->
      <section class="space-y-4">
        <div class="flex items-center space-x-2 px-1">
          <div class="bg-yellow-400 w-1.5 h-5 rounded-full" aria-hidden="true"></div>
          <!-- âœ… 1) æ¨™é¡Œæ›´æ­£ -->
          <h2 class="text-md font-bold text-indigo-900">é™ªä¼´å­©å­æ‹¿å›å°ˆæ³¨ï¼Œæ¨‚åœ¨å­¸ç¿’</h2>
        </div>

        <div class="glass-card p-6 rounded-[2rem] shadow-xl border-orange-100">
          <p class="text-[12px] text-indigo-700 font-black mb-2">å“ˆå›‰ï¼Œæˆ‘æ˜¯å°å¤©ä½¿ç¬‘é•·ã€‚</p>

          <!-- âœ… 2) æ–‡ç¨¿æ›´æ­£ -->
          <p class="text-[12px] text-indigo-700 leading-relaxed font-medium">
            å­©å­å­¸ç¿’å¡ä½æ™‚ï¼Œå…ˆæŠŠé—œä¿‚æŠ±å›ä¾†ã€æŠŠå¤§è…¦æ‹‰å›ç·šï¼›å†æŠŠå­¸ç¿’æ‹†æˆä¸€å°æ­¥ä¸€å°æ­¥ï¼Œå¹«åŠ©å­©å­å›åˆ°å°ˆæ³¨è£¡ï¼Œ
            <span class="font-black">ä½ çš„è€å¿ƒé™ªä¼´ï¼Œæ˜¯å­©å­æœ€å¤§çš„ç¦æ°£ã€‚</span>
          </p>

          <div class="mt-4 p-4 bg-white/70 rounded-2xl border border-orange-100">
            <div class="space-y-2">
              <p class="text-[11px] font-black text-orange-700">
                é©ç”¨å¹´é½¡ï¼š<span class="text-indigo-700">å­¸é½¡å‰ã€åœ‹å°ä½å¹´ç´š</span>
              </p>
              <p class="text-[11px] font-black text-orange-700">
                å°ˆæ³¨æ™‚é–“åƒè€ƒï¼š<span class="text-indigo-700">å¹´é½¡ Ã— 2ï½5 åˆ†é˜</span>
              </p>
              <p class="text-[11px] text-indigo-700 font-medium leading-relaxed">
                ä¾‹ï¼š3æ­²ç´„6ï½15åˆ†ã€5æ­²ç´„10ï½25åˆ†ã€7æ­²ç´„14ï½35åˆ†ï¼ˆå­©å­ç‹€æ…‹ä¸åŒï¼Œå½ˆæ€§å°±å¥½ï¼‰
              </p>
              <p class="text-[11px] font-black text-orange-700">
                ç”¨é€”ï¼š
                <span class="text-indigo-700 font-medium">
                  å»ºç«‹è¦ªå­é€£çµã€ç”¨å°æ­¥é©Ÿå¼•å°å­©å­å°ˆæ³¨èˆ‡å­¸ç¿’èˆˆè¶£ã€è¦ªå­å…±æ¨‚
                </span>
              </p>
            </div>
          </div>

          <!-- å½±ç‰‡ / å›é¥‹ / æ¦‚å¿µé¤¨ -->
          <div class="mt-4 grid grid-cols-3 gap-2">
            <a class="btn-soft btn-3d py-3 rounded-2xl font-black text-[11px] text-center"
               href="https://youtu.be/p1WXzRhoUjg?si=qqEmL_dIDSnvxp45" target="_blank" rel="noopener">
              <i class="fa-brands fa-youtube mr-1"></i> çœ‹å½±ç‰‡
            </a>
            <a class="btn-soft btn-3d py-3 rounded-2xl font-black text-[11px] text-center"
               href="https://forms.gle/WRy6JLzrUbyj6hoD8" target="_blank" rel="noopener">
              <i class="fas fa-pen-to-square mr-1"></i> å¡«å›é¥‹å–®
            </a>
            <a class="btn-soft btn-3d py-3 rounded-2xl font-black text-[11px] text-center"
               href="https://angel0973180707.github.io/angel-happy-paw/" target="_blank" rel="noopener">
              <i class="fas fa-house mr-1"></i> æ¦‚å¿µé¤¨
            </a>
          </div>

          <!-- ä¸‰é¡†å¤§æŒ‰éˆ• -->
          <div class="mt-5 grid grid-cols-3 gap-2">
            <button data-page="sos" class="btn-3d btn-fire py-3 rounded-2xl font-black text-[11px]">
              90ç§’æ¶ˆé˜²è»Š
            </button>
            <button data-page="dojo" class="btn-3d btn-primary py-3 rounded-2xl font-black text-[11px]">
              çœ‹èªªç©ç”¨
            </button>
            <button data-page="treaty" class="btn-3d btn-treaty py-3 rounded-2xl font-black text-[11px]">
              å’Œå¹³æ¢ç´„
            </button>
          </div>

          <div class="mt-4 p-4 bg-orange-50/60 rounded-2xl border border-orange-100">
            <p class="text-[11px] font-black text-orange-700 mb-1">ç¬‘é•·ä¸€å¥è©±ï¼š</p>
            <p class="text-[12px] text-indigo-700 font-medium leading-relaxed">
              å…ˆé¡§å¥½é—œä¿‚ï¼Œå­¸ç¿’è‡ªç„¶æœƒä¾†ã€‚åœ¨å›°é›£è£¡ä¸å­¤å–®ï¼Œæ¯”å­¸å¾—å¿«æ›´é‡è¦ã€‚
            </p>
          </div>
        </div>
      </section>

      <!-- Treaty å€å¡Šï¼ˆå®Œæ•´äº”æ¢ï¼‰ -->
      <section id="page-treaty" class="mango-gradient p-7 rounded-[2.5rem] text-white shadow-2xl">
        <div class="flex items-start justify-between gap-3">
          <div class="min-w-0">
            <h3 class="font-black nowrap-title title-fit">èŠ’æœå’Œå¹³æ¢ç´„</h3>
            <p class="text-[11px] font-bold opacity-95 mt-1">é™ªä¼´å­©å­å­¸ç¿’ï½œè¬ç”¨ç‰ˆ</p>
          </div>

          <div class="flex gap-2 shrink-0">
            <button id="chipChild" class="view-chip active px-3 py-2 rounded-full text-[10px] font-black active:scale-95 transition" aria-label="åˆ‡æ›åˆ°å­©å­ç‰ˆ">
              ğŸ§’ å­©å­
            </button>
            <button id="chipAdult" class="view-chip px-3 py-2 rounded-full text-[10px] font-black active:scale-95 transition" aria-label="åˆ‡æ›åˆ°å¤§äººç‰ˆ">
              ğŸ‘©â€ğŸ‘§ å¤§äºº
            </button>
          </div>
        </div>

        <div class="mt-5 space-y-3">

          <div class="bg-white/15 rounded-2xl p-4 border border-white/20">
            <p class="text-[12px] font-black flex items-center gap-2">
              <span class="bg-white/25 px-2 py-1 rounded-lg text-[10px] font-black">ç¬¬ä¸€æ¢</span>
              å…ˆé€£çµï¼Œå†å­¸ç¿’
            </p>
            <div class="child-view mt-2">
              <p class="text-[13px] font-black">æˆ‘å€‘æ¡æ¡æ‰‹ï¼Œå¤§æ‰‹ç‰½å°æ‰‹</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">æœ‰äººé™ªï¼Œæˆ‘å°±æ¯”è¼ƒä¸æ€•ã€‚ç‰½è‘—æ‰‹ï¼Œæˆ‘å€‘å†ä¸€èµ·è©¦ã€‚</p>
            </div>
            <div class="adult-view mt-2">
              <p class="text-[12px] font-black opacity-95">å¤§äººå¿ƒè£¡æ‡‚ï¼š</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">
                ç‰½æ‰‹ã€è¼•æŠ±ã€é è¿‘ï¼Œæ˜¯å…ˆæŠŠå®‰å…¨æ„Ÿæ”¾å›ä¾†ã€‚å®‰å…¨æ„Ÿå›ä¾†äº†ï¼Œå­©å­æ‰æœ‰ç©ºé–“å­¸ã€‚
              </p>
            </div>
          </div>

          <div class="bg-white/15 rounded-2xl p-4 border border-white/20">
            <p class="text-[12px] font-black flex items-center gap-2">
              <span class="bg-white/25 px-2 py-1 rounded-lg text-[10px] font-black">ç¬¬äºŒæ¢</span>
              æƒ…ç·’å…ˆéï¼Œå…§å®¹å†ä¾†
            </p>
            <div class="child-view mt-2">
              <p class="text-[13px] font-black">æˆ‘å€‘å…ˆå‘¼å¸ä¸‰æ¬¡</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">å¸æ°£ã€åœä¸€ä¸‹ã€åæ°£ã€‚æ…¢æ…¢ä¾†ï¼Œæˆ‘å€‘å†å›ä¾†åšé¡Œç›®ã€‚</p>
            </div>
            <div class="adult-view mt-2">
              <p class="text-[12px] font-black opacity-95">å¤§äººå¿ƒè£¡æ‡‚ï¼š</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">
                å…ˆæŠŠæƒ…ç·’é™æº«ï¼Œå‰é¡è‘‰æ‰å›å¾—ä¾†ï¼›å›å¾—ä¾†ï¼Œå­©å­æ‰è½å¾—é€²ã€åšå¾—åˆ°ã€‚
              </p>
            </div>
          </div>

          <div class="bg-white/15 rounded-2xl p-4 border border-white/20">
            <p class="text-[12px] font-black flex items-center gap-2">
              <span class="bg-white/25 px-2 py-1 rounded-lg text-[10px] font-black">ç¬¬ä¸‰æ¢</span>
              å°æ­¥å°±ç®—è´
            </p>
            <div class="child-view mt-2">
              <p class="text-[13px] font-black">å…ˆå®Œæˆä¸€å°æ ¼å°±å¥½</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">å…ˆåšä¸€é»é»ï¼Œæˆ‘å€‘å°±åœä¸‹ä¾†èªªï¼šæˆ‘åšåˆ°äº†ï¼</p>
            </div>
            <div class="adult-view mt-2">
              <p class="text-[12px] font-black opacity-95">å¤§äººå¿ƒè£¡æ‡‚ï¼š</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">
                æŠŠä»»å‹™åˆ‡å°ã€æŠŠæˆåŠŸåšå¯†ï¼Œå­©å­çš„ã€Œæˆ‘èƒ½æ„Ÿã€å›ä¾†ï¼Œæ‰æœƒé¡˜æ„ç¹¼çºŒã€‚
              </p>
            </div>
          </div>

          <div class="bg-white/15 rounded-2xl p-4 border border-white/20">
            <p class="text-[12px] font-black flex items-center gap-2">
              <span class="bg-white/25 px-2 py-1 rounded-lg text-[10px] font-black">ç¬¬å››æ¢</span>
              ç”¨ã€Œèªªæ¸…æ¥šã€ä»£æ›¿ã€Œå‚¬å¾ˆå¿«ã€
            </p>
            <div class="child-view mt-2">
              <p class="text-[13px] font-black">æˆ‘åªè¦ä½ åšã€Œé€™ä¸€æ­¥ã€</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">ä¸æ˜¯å…¨éƒ¨ã€‚å…ˆé€™ä¸€å€‹ï¼Œåšå®Œå°±å¾ˆæ£’ã€‚</p>
            </div>
            <div class="adult-view mt-2">
              <p class="text-[12px] font-black opacity-95">å¤§äººå¿ƒè£¡æ‡‚ï¼š</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">
                èªªæ¸…æ¥šä¸€ä»¶äº‹ï¼ˆç›®æ¨™/ä¸‹ä¸€æ­¥/åœæ­¢é»ï¼‰ï¼Œæ¯”åŠ é€Ÿã€æ¯”å‚¬ä¿ƒï¼Œæ›´èƒ½è®“å­©å­ç©©å®šä¸Šæ‰‹ã€‚
              </p>
            </div>
          </div>

          <div class="bg-white/15 rounded-2xl p-4 border border-white/20">
            <p class="text-[12px] font-black flex items-center gap-2">
              <span class="bg-white/25 px-2 py-1 rounded-lg text-[10px] font-black">ç¬¬äº”æ¢</span>
              å…ˆå›åˆ°é™ªä¼´ï¼Œå†å›åˆ°å­¸ç¿’
            </p>
            <div class="child-view mt-2">
              <p class="text-[13px] font-black">ä½ ä¸æ˜¯ä¸€å€‹äºº</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">æˆ‘åœ¨ã€‚ä½ é¡˜æ„å›ä¾†å°±å¾ˆå‹‡æ•¢ï¼Œæˆ‘å€‘ä¸€èµ·æ…¢æ…¢åšã€‚</p>
            </div>
            <div class="adult-view mt-2">
              <p class="text-[12px] font-black opacity-95">å¤§äººå¿ƒè£¡æ‡‚ï¼š</p>
              <p class="text-[12px] font-bold opacity-95 mt-1">
                å­©å­é¡˜æ„å›ä¾†ï¼Œå°±æ˜¯é—œä¿‚æœ‰é€£ä¸Šï¼›é—œä¿‚é€£ä¸Šäº†ï¼Œå­¸ç¿’æ‰æœ‰è·¯èµ°ã€‚
              </p>
            </div>
          </div>

          <button id="btnCopyTreaty" class="btn-3d w-full mt-4 bg-white text-orange-700 py-3 rounded-2xl font-black text-sm active:scale-95 transition">
            ä¸€éµè¤‡è£½æ¢ç´„ï¼ˆç›®å‰è¦–è§’ï¼‰
          </button>
        </div>
      </section>

    </div>

    <!-- DOJO -->
    <div id="page-dojo" class="page-content space-y-6">
      <div class="flex items-center space-x-2 px-1">
        <div class="bg-indigo-600 w-1.5 h-5 rounded-full" aria-hidden="true"></div>
        <h2 class="text-md font-bold text-indigo-900">æŠŠå­¸ç¿’è®Šç°¡å–®ï½œçœ‹ãƒ»èªªãƒ»ç©ãƒ»ç”¨</h2>
      </div>

      <section class="grid grid-cols-2 gap-3">
        <button class="glass-card btn-3d p-4 rounded-[1.8rem] text-left active:scale-[0.99] transition"
                data-copy="æˆ‘å€‘å…ˆçœ‹åç§’ï¼šèªªå…©å€‹ç‰¹å¾µå°±å¥½ã€‚">
          <div class="w-9 h-9 bg-blue-100 text-blue-500 rounded-xl flex items-center justify-center mb-2" aria-hidden="true">
            <i class="fas fa-eye text-sm"></i>
          </div>
          <p class="font-black text-indigo-900 text-sm">çœ‹</p>
          <p class="text-[10px] text-indigo-600 font-bold mt-1">10ç§’èªªå…©å€‹ç‰¹å¾µ</p>
          <p class="text-[10px] text-orange-600 font-black mt-2">é»æˆ‘è¤‡è£½</p>
        </button>

        <button class="glass-card btn-3d p-4 rounded-[1.8rem] text-left active:scale-[0.99] transition"
                data-copy="æˆ‘å…ˆåˆ†è§£ï¼Œä½ è·Ÿä¸€å€‹éŸ³ä¹Ÿç®—æˆåŠŸã€‚">
          <div class="w-9 h-9 bg-green-100 text-green-500 rounded-xl flex items-center justify-center mb-2" aria-hidden="true">
            <i class="fas fa-comment text-sm"></i>
          </div>
          <p class="font-black text-indigo-900 text-sm">èªª</p>
          <p class="text-[10px] text-indigo-600 font-bold mt-1">ä¸€éŸ³ä¹Ÿç®—æˆåŠŸ</p>
          <p class="text-[10px] text-orange-600 font-black mt-2">é»æˆ‘è¤‡è£½</p>
        </button>

        <button class="glass-card btn-3d p-4 rounded-[1.8rem] text-left active:scale-[0.99] transition"
                data-copy="æˆ‘å€‘ç”¨ç©ä¾†æ›å›åˆï¼šé…å°ã€æ‰¾åŒè‰²ã€æŠ½å¡éƒ½è¡Œã€‚">
          <div class="w-9 h-9 bg-purple-100 text-purple-500 rounded-xl flex items-center justify-center mb-2" aria-hidden="true">
            <i class="fas fa-gamepad text-sm"></i>
          </div>
          <p class="font-black text-indigo-900 text-sm">ç©</p>
          <p class="text-[10px] text-indigo-600 font-bold mt-1">å›åˆè®Šæ›å°±é™æº«</p>
          <p class="text-[10px] text-orange-600 font-black mt-2">é»æˆ‘è¤‡è£½</p>
        </button>

        <button class="glass-card btn-3d p-4 rounded-[1.8rem] text-left active:scale-[0.99] transition"
                data-copy="æœ€å¾Œè·Ÿç”Ÿæ´»ç¶“é©—çµåˆï¼šæ‘¸ä¸€æ‘¸ã€èä¸€èã€èµ°ä¸€èµ°ï¼Œå°±ä¸‹èª²ã€‚">
          <div class="w-9 h-9 bg-orange-100 text-orange-500 rounded-xl flex items-center justify-center mb-2" aria-hidden="true">
            <i class="fas fa-utensils text-sm"></i>
          </div>
          <p class="font-black text-indigo-900 text-sm">ç”¨</p>
          <p class="text-[10px] text-indigo-600 font-bold mt-1">è·Ÿç”Ÿæ´»ç¶“é©—çµåˆ</p>
          <p class="text-[10px] text-orange-600 font-black mt-2">é»æˆ‘è¤‡è£½</p>
        </button>
      </section>
    </div>

    <!-- SOS -->
    <div id="page-sos" class="page-content space-y-4">
      <div class="bg-red-50 p-7 rounded-[2.5rem] border-2 border-red-100 shadow-2xl">
        <div class="flex justify-between items-center mb-6">
          <h3 class="font-black text-red-600 flex items-center">
            <i class="fas fa-truck-medical mr-3 text-xl" aria-hidden="true"></i> æƒ…ç·’æ¶ˆé˜²è»Šï¼šåœçœ‹å‘¼ååˆ‡åˆ†å‹•
          </h3>
          <button data-page="home" class="text-red-300" aria-label="é—œé–‰æ¶ˆé˜²è»Š">
            <i class="fas fa-times-circle text-2xl" aria-hidden="true"></i>
          </button>
        </div>

        <div id="sosSteps" class="space-y-3"></div>

        <button id="sosBtn" class="btn-3d btn-fire w-full mt-8 py-4 rounded-2xl font-black text-sm transition">
          å¥½ï¼Œä¸‹ä¸€å°æ­¥
        </button>
      </div>
    </div>

  </main>

  <!-- Footer Tab Bar -->
  <nav class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-orange-100 flex justify-around items-center py-4 z-50 rounded-t-[2rem] shadow-[0_-5px_20px_rgba(0,0,0,0.05)]">
    <button data-page="home" id="tab-home" class="flex flex-col items-center tab-active transition-all">
      <i class="fas fa-home text-lg" aria-hidden="true"></i>
      <span class="text-[10px] font-black mt-1">é¦–é </span>
    </button>

    <button data-page="dojo" id="tab-dojo" class="flex flex-col items-center text-indigo-300 transition-all">
      <i class="fas fa-cubes text-lg" aria-hidden="true"></i>
      <span class="text-[10px] font-black mt-1">çœ‹èªªç©ç”¨</span>
    </button>

    <button data-page="treaty" id="tab-treaty" class="flex flex-col items-center text-indigo-300 transition-all">
      <i class="fas fa-handshake text-lg" aria-hidden="true"></i>
      <span class="text-[10px] font-black mt-1">å’Œå¹³æ¢ç´„</span>
    </button>

    <button data-page="sos" id="tab-sos" class="flex flex-col items-center text-indigo-300 transition-all">
      <i class="fas fa-truck-medical text-lg" aria-hidden="true"></i>
      <span class="text-[10px] font-black mt-1">æ¶ˆé˜²è»Š</span>
    </button>
  </nav>

  <!-- Toast -->
  <div id="toast" class="fixed left-1/2 -translate-x-1/2 bottom-24 bg-indigo-900 text-white text-[12px] font-black px-4 py-2 rounded-full shadow-xl hidden z-[200]">
    å·²è¤‡è£½
  </div>

  <script>
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const pages = ["home","dojo","treaty","sos"];

    function showPage(pageId){
      if(!pages.includes(pageId)) return;

      $$(".page-content").forEach(p => p.classList.remove("active"));

      if(pageId==="treaty"){
        $("#page-home").classList.add("active");
        setTimeout(()=> {
          $("#page-treaty").scrollIntoView({behavior:"smooth", block:"start"});
        }, 50);
      }else{
        $("#page-"+pageId).classList.add("active");
        window.scrollTo({top:0, behavior:"smooth"});
      }

      $$("#tab-home,#tab-dojo,#tab-treaty,#tab-sos").forEach(tab=>{
        tab.classList.remove("tab-active");
        tab.classList.add("text-indigo-300");
      });

      const activeTab = $("#tab-"+pageId);
      if(activeTab){
        activeTab.classList.add("tab-active");
        activeTab.classList.remove("text-indigo-300");
      }

      if(pageId==="sos") startSOS();
    }

    let toastTimer = null;
    function toast(msg="å·²è¤‡è£½"){
      const t = $("#toast");
      t.textContent = msg;
      t.classList.remove("hidden");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>t.classList.add("hidden"), 1200);
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        toast("å·²è¤‡è£½");
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        toast("å·²è¤‡è£½");
      }
    }

    function setView(view){
      document.body.setAttribute("data-view", view);
      $("#chipChild").classList.toggle("active", view==="child");
      $("#chipAdult").classList.toggle("active", view==="adult");
      try{ localStorage.setItem("mango_view", view); }catch(e){}
    }
    try{
      const saved = localStorage.getItem("mango_view");
      if(saved==="adult" || saved==="child") setView(saved);
    }catch(e){}

    $("#chipChild").addEventListener("click", ()=> setView("child"));
    $("#chipAdult").addEventListener("click", ()=> setView("adult"));

    // ä¸€éµè¤‡è£½ï¼šä¾ç›®å‰è¦–è§’è¤‡è£½ã€Œå…¨éƒ¨äº”æ¢ã€
    $("#btnCopyTreaty")?.addEventListener("click", ()=>{
      const view = document.body.getAttribute("data-view") || "child";

      const childText = [
        "èŠ’æœå’Œå¹³æ¢ç´„ï½œå­©å­ç‰ˆ",
        "ç¬¬ä¸€æ¢ï¼šæˆ‘å€‘æ¡æ¡æ‰‹ï¼Œå¤§æ‰‹ç‰½å°æ‰‹ã€‚æœ‰äººé™ªï¼Œæˆ‘å°±æ¯”è¼ƒä¸æ€•ã€‚ç‰½è‘—æ‰‹ï¼Œæˆ‘å€‘å†ä¸€èµ·è©¦ã€‚",
        "ç¬¬äºŒæ¢ï¼šæƒ…ç·’å…ˆéï¼Œå…§å®¹å†ä¾†ã€‚æˆ‘å€‘å…ˆå‘¼å¸ä¸‰æ¬¡ï¼šå¸æ°£ã€åœä¸€ä¸‹ã€åæ°£ã€‚æ…¢æ…¢ä¾†ï¼Œæˆ‘å€‘å†å›ä¾†åšé¡Œç›®ã€‚",
        "ç¬¬ä¸‰æ¢ï¼šå°æ­¥å°±ç®—è´ã€‚å…ˆå®Œæˆä¸€å°æ ¼å°±å¥½ã€‚å…ˆåšä¸€é»é»ï¼Œæˆ‘å€‘å°±åœä¸‹ä¾†èªªï¼šæˆ‘åšåˆ°äº†ï¼",
        "ç¬¬å››æ¢ï¼šç”¨èªªæ¸…æ¥šä»£æ›¿å‚¬å¾ˆå¿«ã€‚æˆ‘åªè¦ä½ åšã€é€™ä¸€æ­¥ã€ï¼Œä¸æ˜¯å…¨éƒ¨ã€‚å…ˆé€™ä¸€å€‹ï¼Œåšå®Œå°±å¾ˆæ£’ã€‚",
        "ç¬¬äº”æ¢ï¼šå…ˆå›åˆ°é™ªä¼´ï¼Œå†å›åˆ°å­¸ç¿’ã€‚ä½ ä¸æ˜¯ä¸€å€‹äººï¼Œæˆ‘åœ¨ã€‚ä½ é¡˜æ„å›ä¾†å°±å¾ˆå‹‡æ•¢ï¼Œæˆ‘å€‘ä¸€èµ·æ…¢æ…¢åšã€‚"
      ].join("\n");

      const adultText = [
        "èŠ’æœå’Œå¹³æ¢ç´„ï½œå¤§äººç‰ˆ",
        "ç¬¬ä¸€æ¢ï¼šå…ˆé€£çµï¼Œå†å­¸ç¿’ã€‚ç‰½æ‰‹ã€è¼•æŠ±ã€é è¿‘ï¼Œæ˜¯å…ˆæŠŠå®‰å…¨æ„Ÿæ”¾å›ä¾†ã€‚å®‰å…¨æ„Ÿå›ä¾†äº†ï¼Œå­©å­æ‰æœ‰ç©ºé–“å­¸ã€‚",
        "ç¬¬äºŒæ¢ï¼šæƒ…ç·’å…ˆéï¼Œå…§å®¹å†ä¾†ã€‚å…ˆæŠŠæƒ…ç·’é™æº«ï¼Œå‰é¡è‘‰æ‰å›å¾—ä¾†ï¼›å›å¾—ä¾†ï¼Œå­©å­æ‰è½å¾—é€²ã€åšå¾—åˆ°ã€‚",
        "ç¬¬ä¸‰æ¢ï¼šå°æ­¥å°±ç®—è´ã€‚æŠŠä»»å‹™åˆ‡å°ã€æŠŠæˆåŠŸåšå¯†ï¼Œå­©å­çš„ã€æˆ‘èƒ½æ„Ÿã€å›ä¾†ï¼Œæ‰æœƒé¡˜æ„ç¹¼çºŒã€‚",
        "ç¬¬å››æ¢ï¼šç”¨èªªæ¸…æ¥šä»£æ›¿å‚¬å¾ˆå¿«ã€‚èªªæ¸…æ¥šä¸€ä»¶äº‹ï¼ˆç›®æ¨™/ä¸‹ä¸€æ­¥/åœæ­¢é»ï¼‰ï¼Œæ¯”åŠ é€Ÿå‚¬ä¿ƒæ›´èƒ½è®“å­©å­ç©©å®šä¸Šæ‰‹ã€‚",
        "ç¬¬äº”æ¢ï¼šå…ˆå›åˆ°é™ªä¼´ï¼Œå†å›åˆ°å­¸ç¿’ã€‚å­©å­é¡˜æ„å›ä¾†ï¼Œå°±æ˜¯é—œä¿‚æœ‰é€£ä¸Šï¼›é—œä¿‚é€£ä¸Šäº†ï¼Œå­¸ç¿’æ‰æœ‰è·¯èµ°ã€‚"
      ].join("\n");

      copyText(view==="adult" ? adultText : childText);
    });

    // SOS
    let currentStep = 0;
    const steps = [
      "åœâ€”â€”éŸ³é‡é™ä¸€åŠã€‚",
      "çœ‹â€”â€”çœ‹çœ‹è‡ªå·±å’Œå­©å­æœ‰æ²’æœ‰ç·Šç¹ƒã€‚",
      "å‘¼â€”â€”å¸4ã€åœ2ã€å6ã€‚",
      "åâ€”â€”å¹«å­©å­æƒ…ç·’å–åå­—ï¼ˆä¾‹å¦‚ï¼šä½ çœ‹èµ·ä¾†å¡ä½åˆè‘—æ€¥ï¼‰ã€‚",
      "åˆ‡åˆ†â€”â€”åˆ‡åˆ†å­¸ç¿’æ­¥é©Ÿï¼šå…ˆå®Œæˆä¸€å°æ­¥ã€‚",
      "å‹•â€”â€”çµåˆèº«é«”å‹•ä½œï¼Œå¹«åŠ©è¨˜æ†¶ã€å­¸ç¿’ã€‚"
    ];
    function startSOS(){ currentStep = 0; updateSOSUI(); }
    function updateSOSUI(){
      const container = $("#sosSteps");
      container.innerHTML = "";
      for(let i=0; i<=currentStep; i++){
        const div = document.createElement("div");
        div.className = "p-4 bg-white rounded-2xl shadow-sm border-l-4 sos-border text-[13px] font-bold text-indigo-900 fade-in";
        div.innerHTML = `<span class="text-red-500 mr-2">${i+1}.</span> ${steps[i]}`;
        container.appendChild(div);
      }
      $("#sosBtn").innerText = currentStep === steps.length-1 ? "å®Œæˆï¼Œå›åˆ°é™ªä¼´" : "ä¸‹ä¸€å°æ­¥";
    }
    $("#sosBtn")?.addEventListener("click", ()=>{
      if(currentStep < steps.length-1){ currentStep++; updateSOSUI(); }
      else{ showPage("home"); }
    });

    // Delegation
    document.addEventListener("click", (e)=>{
      const pageBtn = e.target.closest("[data-page]");
      if(pageBtn){ showPage(pageBtn.getAttribute("data-page")); return; }
      const copyBtn = e.target.closest("[data-copy]");
      if(copyBtn){ copyText(copyBtn.getAttribute("data-copy")); return; }
    });

    showPage("home");
  </script>
</body>
</html>